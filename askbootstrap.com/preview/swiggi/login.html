<!doctype html>
<html lang="en">
  <!-- Mirrored from askbootstrap.com/preview/swiggi/login.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Sep 2024 06:30:25 GMT -->
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="Askbootstrap" />
    <meta name="author" content="Askbootstrap" />
    <link rel="icon" type="image/png" href="img/fav.png" />
    <title>Swiggi - Online Food Ordering Website Mobile Template</title>

    <link rel="stylesheet" type="text/css" href="vendor/slick/slick.min.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="vendor/slick/slick-theme.min.css"  
    />

    <link href="vendor/icons/feather.css" rel="stylesheet" type="text/css" />

    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <link href="./img/css/style.css" rel="stylesheet" />

    <link href="vendor/sidebar/demo.css" rel="stylesheet" />
    <style>
      #vid {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover; /* Ensures the video covers the entire viewport */
  z-index: -1; /* Places the video behind other content */
}

    </style>
  </head>
  <body>
    <div class="login-signup-form">
      <div class="login-page vh-100">
        <video loop autoplay muted id="vid">
          <source src="img/bg.mp4" type="video/mp4" />
          <source src="img/bg.mp4" type="video/ogg" />
          Your browser does not support the video tag.
        </video>
        <div class="p-4">
          <h2 class="text-white my-0">Welcome Back</h2>
          <p class="text-white text-50">Sign in to continue</p>
          <form
            id="loginForm"
            class="login_signup_form mt-5 mb-4"
            action="https://askbootstrap.com/preview/swiggi/verification.html"
          >
            <div class="form-group">
              <label for="email" class="text-white">Email</label>
              <input
                type="email"
                placeholder="Enter Email"
                class="form-control"
                id="email"
                aria-describedby="emailHelp"
              />
            </div>
            <div class="form-group">
              <label for="password" class="text-white">Password</label>
              <input
                type="password"
                placeholder="Enter Password"
                class="form-control"
                id="password"
              />
            </div>
            <button
              type="button"
              value="login"
              class="btn btn-primary btn-lg btn-block"
              id="login-btn"
            >
              <a class="./location.html" class="font-decoration-none"
                >SIGN IN</a
              >
            </button>
            <div class="py-2">
              <button class="btn btn-lg btn-facebook btn-block">
                <i class="feather-facebook"></i> Connect with Facebook
              </button>
            </div>
          </form>
          <a href="forgot_password.html" class="text-decoration-none">
            <p class="text-white text-center">Forgot your password?</p>
          </a>
        </div>
        <div
          class="fixed-bottom d-flex align-items-center justify-content-center"
        >
          <a href="signup.html">
            <p class="text-center text-white m-0">
              Don't have an account? Sign up
            </p>
          </a>
        </div>
      </div>
    </div>

    <nav id="main-nav">
      <ul class="second-nav">
        <li>
          <a href="index.html"><i class="feather-grid mr-2"></i> Intro</a>
        </li>
        <li>
          <a href="landing.html"><i class="feather-layers mr-2"></i> Landing</a>
        </li>
        <li>
          <a href="home.html"><i class="feather-home mr-2"></i> Homepage</a>
        </li>
        <li>
          <a href="#"><i class="feather-edit-2 mr-2"></i> Authentication</a>
          <ul>
            <li><a href="login.html">Login</a></li>
            <li><a href="signup.html">Register</a></li>
            <li><a href="forgot_password.html">Forgot Password</a></li>
            <li><a href="verification.html">Verification</a></li>
            <li><a href="location.html">Location</a></li>
            <li><a href="select_country.html">Select Country</a></li>
          </ul>
        </li>
        <li>
          <a href="trending.html"
            ><i class="feather-trending-up mr-2"></i> Trending</a
          >
        </li>
        <li>
          <a href="most_popular.html"
            ><i class="feather-award mr-2"></i> Most Popular</a
          >
        </li>
        <li>
          <a href="restaurant.html"
            ><i class="feather-paperclip mr-2"></i> Restaurant Detail</a
          >
        </li>
        <li>
          <a href="recipe.html"
            ><i class="feather-file-text mr-2"></i> Recipe</a
          >
        </li>
        <li>
          <a href="checkout.html"><i class="feather-list mr-2"></i> Checkout</a>
        </li>
        <li>
          <a href="map.html"><i class="feather-map-pin mr-2"></i> Live Map</a>
        </li>
        <li>
          <a href="payment.html"
            ><i class="feather-credit-card mr-2"></i> Payment</a
          >
        </li>
        <li>
          <a href="#"><i class="feather-user mr-2"></i> Profile</a>
          <ul>
            <li><a href="profile.html">Profile</a></li>
            <li><a href="favorites.html">Favorites</a></li>
          </ul>
        </li>
        <li>
          <a href="#"><i class="feather-book mr-2"></i> Pages</a>
          <ul>
            <li><a href="filters.html">Filters</a></li>
            <li><a href="terms.html">Terms & conditions</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="privacy.html">Privacy & Policy</a></li>
            <li><a href="contact-us.html">Contact Us</a></li>
          </ul>
        </li>
        <li>
          <a href="#"><i class="feather-alert-triangle mr-2"></i> Error</a>
          <ul>
            <li><a href="not-found.html">Not Found</a></li>
            <li><a href="maintence.html"> Maintence</a></li>
            <li><a href="coming-soon.html">Coming Soon</a></li>
          </ul>
        </li>
        <li>
          <a href="#"
            ><i class="feather-link mr-2"></i> Navigation Link Example</a
          >
          <ul>
            <li>
              <a href="#">Link Example 1</a>
              <ul>
                <li>
                  <a href="#">Link Example 1.1</a>
                  <ul>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                  </ul>
                </li>
                <li>
                  <a href="#">Link Example 1.2</a>
                  <ul>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Link</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li><a href="#">Link Example 2</a></li>
            <li><a href="#">Link Example 3</a></li>
            <li><a href="#">Link Example 4</a></li>
            <li data-nav-custom-content>
              <div class="custom-message">
                You can add any custom content to your navigation items. This
                text is just an example.
              </div>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="bottom-nav">
        <li class="email">
          <a class="text-danger" href="home.html">
            <p class="h5 m-0"><i class="feather-home text-danger"></i></p>
            Home
          </a>
        </li>
        <li class="github">
          <a href="faq.html">
            <p class="h5 m-0"><i class="feather-message-circle"></i></p>
            FAQ
          </a>
        </li>
        <li class="ko-fi">
          <a href="contact-us.html">
            <p class="h5 m-0"><i class="feather-phone"></i></p>
            Help
          </a>
        </li>
      </ul>
    </nav>

    <script
      src="vendor/jquery/jquery.min.js"
      type="5450b9d3810d1c0d60964dcb-text/javascript"
    ></script>
    <script
      src="vendor/bootstrap/js/bootstrap.bundle.min.js"
      type="5450b9d3810d1c0d60964dcb-text/javascript"
    ></script>

    <script
      type="5450b9d3810d1c0d60964dcb-text/javascript"
      src="vendor/slick/slick.min.js"
    ></script>

    <script
      type="5450b9d3810d1c0d60964dcb-text/javascript"
      src="vendor/sidebar/hc-offcanvas-nav.js"
    ></script>

    <script
      src="js/osahan.js"
      type="5450b9d3810d1c0d60964dcb-text/javascript"
    ></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("/env.json")
          .then((response) => response.json())
          .then((data) => {
            const url = data.URL; // The base URL from the JSON
            const restaurantData = data.RESTAURANTS[0]; // Assuming one restaurant
            const restaurant_id = restaurantData.RESTAURANT_ID;
            const locationId = restaurantData.LOCATION;

            const sessionLocationId =
              sessionStorage.getItem("selectedLocationId");
            const storedRestaurant = localStorage.getItem("urlSegment");

            console.log("API URL:", url);
            console.log("Location ID from JSON:", locationId);
            console.log("Restaurant ID from JSON:", restaurant_id);

            const loginBtn = document.querySelector("#login-btn");
            const loginForm = document.querySelector("#loginForm");

            loginBtn.addEventListener("click", (e) => {
              e.preventDefault(); // Prevent default form submission

              const email = document.getElementById("email").value;
              const password = document.getElementById("password").value;

              console.log(email, password);

              const apiUrl = "https://app.extraaazpos.com/api/customer-login"; // Adjust the URL accordingly

              fetch(apiUrl, {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  email: email,
                  password: password,
                  restaurant_id: storedRestaurant, // Use stored value if available
                }),
              })
                .then((response) => response.json())
                .then((data) => {
                  console.log(data);

                  if (data.success) {
                    const {
                      token,
                      customer_name,
                      customer_number,
                      customer_id,
                      registrationId,
                      locationId,
                      restaurant_id,
                    } = data.data;

                    sessionStorage.setItem("token", token);
                    sessionStorage.setItem("customerName", customer_name);
                    sessionStorage.setItem("customerNumber", customer_number);
                    sessionStorage.setItem("customerId", customer_id);
                    // Check if locationId and restaurant_id exist in the response before setting them
                    if (restaurant_id) {
                      sessionStorage.setItem("restaurantId", restaurant_id);
                    } else {
                      console.warn(
                        "restaurant_id is undefined in API response."
                      );
                    }
                    if (locationId) {
                      sessionStorage.setItem("locationId", locationId);
                    } else {
                      console.warn("locationId is undefined in API response.");
                    }
                    window.location.href = "location.html"; // Redirect or handle success
                  } else {
                    console.error("Login Error:", data.error);
                    alert("Login failed. Please check your credentials.");
                  }
                })
                .catch((error) => {
                  console.error("Login Error:", error);
                  alert("Error logging in. Please try again.");
                });
            });
          })
          .catch((error) => console.error("Error fetching env.json:", error));
      });
    </script>

    
  </body>

  <!-- Mirrored from askbootstrap.com/preview/swiggi/login.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Sep 2024 06:30:26 GMT -->
</html>
